{% extends "base.html" %}

{% block content %}
<div class="form-container">
    <h2>开始一个新的测验</h2>
    <form method="POST" action="{{ url_for('start_quiz') }}">
        
        <!-- NEW: Question Set Dropdown -->
        <div class="form-group">
            <label for="question_set_id">选择题集</label>
            <select name="question_set_id" id="question_set_id" class="form-control-file">
                <option value="all">所有题目</option>
                {% for set in question_sets %}
                    <option value="{{ set.id }}">{{ set.name }} ({{ set.questions|length }} 题)</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="num_questions">题目数量</label>
            <input type="number" id="num_questions" name="num_questions" class="form-group input[type='number']" value="10" min="1">
        </div>
        <button type="submit" class="button">开始测验</button>
    </form>
</div>

<div class="form-container">
    <h2>管理题库</h2>
    <p>从 .xlsx 文件导入新题目, 或查看你已上传的所有题目。</p>
    <div class="button-group">
        <a href="{{ url_for('import_excel') }}" class="button">导入题目</a>
        <a href="{{ url_for('my_questions') }}" class="button button-secondary">我的题库</a>
    </div>
</div>
{% endblock %}