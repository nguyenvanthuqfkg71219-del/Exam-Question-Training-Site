{% extends "base.html" %}

{% block content %}
    <h2>我的错题集</h2>
    <p>这里按题集分类，汇总了你所有答错的题目。</p>

    <!-- Point 3: "All Wrong Answers" Button -->
    <div class="wrong-answer-set-item all-sets-card">
        <a href="{{ url_for('wrong_answer', set_id='all') }}" class="set-link">
            <h3>
                所有错题
            </h3>
            <p>
                查看你所有题集中答错过的题目总汇。
            </p>
            <span class="view-review-text">查看总汇 &rarr;</span>
        </a>
    </div>

    <hr class="set-divider">

    <!-- Point 2: List of Question Sets -->
    {% if question_sets %}
        {% for set in question_sets %}
            <div class="wrong-answer-set-item">
                <a href="{{ url_for('wrong_answer', set_id=set.id) }}" class="set-link">
                    <h3>
                        {{ set.name }}
                    </h3>
                    <p>
                        上传于: {{ set.timestamp.strftime('%Y-%m-%d') }} | 共 {{ set.questions|length }} 道题
                    </p>
                    <span class="view-review-text">查看错题 &rarr;</span>
                </a>
            </div>
        {% endfor %}
    {% else %}
        <div class="form-container">
            <h3>没有错题集</h3>
            <p>你还没有上传任何题集。请先导入一个 Excel 文件。</p>
            <a href="{{ url_for('import_excel') }}" class="button">立即导入</a>
        </div>
    {% endif %}
{% endblock %}