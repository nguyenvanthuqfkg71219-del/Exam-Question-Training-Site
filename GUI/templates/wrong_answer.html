{% extends "base.html" %}

{% block content %}
    <!-- Title is passed from the route -->
    <h2>{{ title }} (共 {{ questions|length }} 道)</h2>
    <a href="{{ url_for('wrong_answer_sets') }}" class="button">&larr; 返回错题集</a>

    <div class="question-list">
        {% for question in questions %}
            <!-- We reuse the style from .wrong-answer-item for consistency -->
            <div class="wrong-answer-item">
                <h4>{{ loop.index }}. {{ question.question_text }}</h4>
                
                {% if question.is_multiple_choice %}
                    <p class="multi-choice-note">(多选题)</p>
                {% endif %}

                <!-- Display all options, highlighting the correct one(s) -->
                <div class="options-container">
                    <div class="option {% if 'A' in question.correct_answer %}correct{% endif %}">
                        A. {{ question.option_a }}
                    </div>
                    <div class="option {% if 'B' in question.correct_answer %}correct{% endif %}">
                        B. {{ question.option_b }}
                    </div>
                    <div class="option {% if 'C' in question.correct_answer %}correct{% endif %}">
                        C. {{ question.option_c }}
                    </div>
                    <div class="option {% if 'D' in question.correct_answer %}correct{% endif %}">
                        D. {{ question.option_d }}
                    </div>
                </div>

                <p class="answer-key">
                    <strong>正确答案:</strong> 
                    <span class="correct-answer">{{ question.correct_answer }}</span>
                </p>
                <!-- Info about where this question came from -->
                <p class="question-source-note">
                    来源题集: {{ question.question_set.name }}
                </p>
            </div>
        {% else %}
            <div class="form-container">
                <h3>太棒了!</h3>
                <p>这个题集中没有你答错的题目。</p>
            </div>
        {% endfor %}
    </div>
{% endblock %}